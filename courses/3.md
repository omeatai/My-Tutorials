### [3-FULL STACK WEB DEVELOPMENT USING THE MERN STACK AND DEVOPS - ODAFE](https://www.udemy.com/course/full-stack-web-development-using-the-mern-stack-and-devops/)

<details>
  <summary>1. Introduction to Express </summary>

# Initialize npm

```jsbs
npm init -y
```

# Install express

```jsbs
npm install express --save
```

# install nodemon

```jsbs
npm install nodemon --save-dev
```

### x-odafe-project/package.json:

```js
{
  "name": "x-odafe-project",
  "version": "1.0.0",
  "description": "",
  "main": "app.js",
  "scripts": {
    "dev": "nodemon app.js",
    "start": "node app.js",
    "start-server": "node server.js",
    "test": "echo \"Error: no test specified\" && exit 1"
  },
  "keywords": [],
  "author": "",
  "license": "ISC",
  "dependencies": {
    "express": "^4.18.2"
  },
  "devDependencies": {
    "nodemon": "^2.0.22"
  }
}

```

### x-odafe-project/app.js:

```js
const express = require("express");
const app = express();
const PORT = 8080;

app.get("/", (req, res) => {
  res.send("Hello World!");
});

app.listen(PORT, () => {
  console.log(`Server listening on port ${PORT}...`);
});
```

![](https://github.com/omeatai/React-Tutorial/assets/32337103/996baee6-1791-47b6-adff-bf5eb5554310)
![](https://github.com/omeatai/React-Tutorial/assets/32337103/3188767c-b7fd-4c00-954f-ec9afe9427c0)

</details>

<details>
  <summary>2. Returning JSON response </summary>

# Returning JSON response

### x-odafe-project/app.js:

```js
const express = require("express");
const app = express();
const PORT = 8080;

app.get("/", (req, res) => {
  res.status(200).send("Hello World!");
});

app.get("/test", (req, res) => {
  res.status(200).json({ msg: "This is a JSON response..." });
});

app.listen(PORT, () => {
  console.log(`Server listening on port ${PORT}...`);
});
```

![](https://github.com/omeatai/React-Tutorial/assets/32337103/792e6f99-d01b-4698-b69b-677e6c150341)
![](https://github.com/omeatai/React-Tutorial/assets/32337103/c939498e-18a1-44ea-95fa-b9243ae58fa5)

</details>

<details>
  <summary>3. Using Middlewares to Log requests </summary>

# Using Middleware to Log requests

### x-odafe-project/app.js:

```js
const express = require("express");
const app = express();
const PORT = 8080;

app.use((req, res, next) => {
  console.log(req.method, req.url, req.path, req.ip, req.headers.host);
  next();
});

app.get("/", (req, res) => {
  res.status(200).send("Hello World!");
});

app.get("/test", (req, res) => {
  res.status(200).json({ msg: "This is a JSON response..." });
});

app.listen(PORT, () => {
  console.log(`Server listening on port ${PORT}...`);
});
```

# output:

```js
// [nodemon] restarting due to changes...
// [nodemon] starting `node app.js`
// Server listening on port 8080...
// GET /test /test ::1 localhost:8080
```

![](https://github.com/omeatai/React-Tutorial/assets/32337103/1abed75a-6dc1-46cd-b33c-3480633e36a3)
![](https://github.com/omeatai/React-Tutorial/assets/32337103/f7cf903d-f9c3-4a04-ae2c-e39254b94130)

</details>

<details>
  <summary>4. Setup Shopy Express Server </summary>

# Initialize npm

```jsbs
npm init -y
```

# Initialize git

```jsbs
git init
```

# Install express, bcryptjs, jsonwebtoken, mongoose, and nodemon

```jsbs
npm i express --save
npm i bcryptjs --save
npm i jsonwebtoken --save
npm i mongoose --save
npm i nodemon --save-dev

npm i express bcryptjs jsonwebtoken mongoose --save
npm i nodemon --save-dev
```

### x-shopy-ecommerce-app/package.json:

```js
{
  "name": "x-shopy-ecommerce-app",
  "version": "1.0.0",
  "description": "",
  "main": "index.js",
  "scripts": {
    "test": "echo \"Error: no test specified\" && exit 1",
    "start": "nodemon server.js"
  },
  "keywords": [],
  "author": "",
  "license": "ISC",
  "devDependencies": {
    "nodemon": "^2.0.22"
  },
  "dependencies": {
    "bcryptjs": "^2.4.3",
    "express": "^4.18.2",
    "jsonwebtoken": "^9.0.0",
    "mongoose": "^7.2.1"
  }
}

```

### x-shopy-ecommerce-app/server.js:

```js
const express = require("express");
const app = express();
const PORT = process.env.PORT || 8000;

app.get("/", (req, res) => {
  res.send("My App is running...");
});

app.listen(PORT, () => {
  console.log(`Server is listening on ${PORT}...`);
});
```

# output:

```js
// [nodemon] restarting due to changes...
// [nodemon] starting `node server.js`
// Server is listening on 8000...
```

![](https://github.com/omeatai/React-Tutorial/assets/32337103/c183df84-952d-402c-8989-1204b70e7930)
![](https://github.com/omeatai/React-Tutorial/assets/32337103/49f92c54-3c4d-4ccd-98f4-fb483692fb1b)

</details>

<details>
  <summary>5. Setup and Connect to MongoDB Database </summary>

# Install mongoDB

```jsbs
npm install mongodb --save
```

# Connect to MongoDB

```jsbs
mongodb+srv://<username>:<password>@cluster0.qfv7ifn.mongodb.net/<dbname>?retryWrites=true&w=majority
```

```js
const { MongoClient, ServerApiVersion } = require("mongodb");
const uri =
  "mongodb+srv://<username>:<password>@cluster0.qfv7ifn.mongodb.net/?retryWrites=true&w=majority";

// Create a MongoClient with a MongoClientOptions object to set the Stable API version
const client = new MongoClient(uri, {
  serverApi: {
    version: ServerApiVersion.v1,
    strict: true,
    deprecationErrors: true,
  },
});

async function run() {
  try {
    // Connect the client to the server	(optional starting in v4.7)
    await client.connect();
    // Send a ping to confirm a successful connection
    await client.db("admin").command({ ping: 1 });
    console.log(
      "Pinged your deployment. You successfully connected to MongoDB!"
    );
  } finally {
    // Ensures that the client will close when you finish/error
    await client.close();
  }
}
run().catch(console.dir);
```

# Install Mongoose

```jsbs
npm install mongoose --save
```

# Connect to Mongoose

```js
const mongoose = require("mongoose");
mongoose.connect("mongodb://127.0.0.1:27017/test");

const Cat = mongoose.model("Cat", { name: String });

const kitty = new Cat({ name: "Zildjian" });
kitty.save().then(() => console.log("meow"));
```

### x-shopy-ecommerce-app/server.js:

```js
const express = require("express");
const app = express();
const connectDB = require("./config/db");
const PORT = process.env.PORT || 8000;

connectDB();

app.get("/", (req, res) => {
  res.send("My App is running...");
});

app.listen(PORT, () => {
  console.log(`Server is listening on ${PORT}...`);
});
```

### x-shopy-ecommerce-app/config/db.js:

```js
const mongoose = require("mongoose");
const config = require("./keys");
const db = config.mongoURI;

const connectDB = async () => {
  try {
    await mongoose.connect(db, {
      // useNewUrlParser: true,
      // useUnifiedTopology: true,
      // useCreateIndex: true,
    });
    console.log("Connected to DATABASE...");
  } catch (err) {
    console.log("Error connecting to DATABASE");
    process.exit(1);
  }
};

module.exports = connectDB;
```

### x-shopy-ecommerce-app/config/keys.js:

```js
const mongoURI =
  "mongodb+srv://<username>:<password>@cluster0.qfv7ifn.mongodb.net/<dbname>?retryWrites=true&w=majority";

module.exports = { mongoURI };
```

# run:

```jsbs
npm start
```

# output:

```js
// [nodemon] restarting due to changes...
// [nodemon] starting `node server.js`
// Server is listening on 8000...
// Connected to DATABASE...
```

![](https://github.com/omeatai/React-Tutorial/assets/32337103/08b49b29-85bb-4cee-8f79-48663746cba9)
![](https://github.com/omeatai/React-Tutorial/assets/32337103/70afedc0-759b-4e44-a248-711f19368eb6)

</details>

<details>
  <summary>6. Creating and Managing API Routes </summary>

# Creating and Managing API Routes

### x-shopy-ecommerce-app/server.js:

```js
const express = require("express");
const app = express();
const connectDB = require("./config/db");
const PORT = process.env.PORT || 8000;

//Connect to the DB
connectDB();

//Define routes and API
app.use("/api/users", require("./routes/userApi"));
app.use("/api/products", require("./routes/productApi"));

app.get("/", (req, res) => {
  res.send("My App is running...");
});

app.listen(PORT, () => {
  console.log(`Server is listening on ${PORT}...`);
});
```

### x-shopy-ecommerce-app/routes/productApi.js:

```js
const express = require("express");
const router = express.Router();

router.get("/", (req, res) => {
  res.send("Product route");
});

module.exports = router;
```

### x-shopy-ecommerce-app/routes/userApi.js:

```js
const express = require("express");
const router = express.Router();

router.get("/", (req, res) => {
  res.send("Users route");
});

module.exports = router;
```

![](https://github.com/omeatai/React-Tutorial/assets/32337103/e379fdea-e3f0-4216-b143-7667f5505a57)
![](https://github.com/omeatai/React-Tutorial/assets/32337103/2afa9402-e3bf-4af7-8388-bf7e933c935f)
![](https://github.com/omeatai/React-Tutorial/assets/32337103/027e91a2-3027-4efc-98d2-06ab4825f1bd)
![](https://github.com/omeatai/React-Tutorial/assets/32337103/991c48a9-bf7b-435b-89f3-71eec7ec8420)
![](https://github.com/omeatai/React-Tutorial/assets/32337103/fda1cbd2-a3ee-4ffd-9fb4-a289b91ea544)
![](https://github.com/omeatai/React-Tutorial/assets/32337103/cd9762c8-df54-4a4c-8f2e-db8f2653c04c)

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

```js

```

</details>
